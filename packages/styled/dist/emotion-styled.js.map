{"version":3,"file":"emotion-styled.js","sources":["../src/utils.js","../src/base.js","../src/index.js","../src/tags.js"],"sourcesContent":["// @flow\nimport type { ElementType, StatelessFunctionalComponent } from 'react'\nimport isPropValid from '@emotion/is-prop-valid'\n\nexport type Interpolations = Array<any>\n\nexport type StyledOptions = {\n  label?: string,\n  shouldForwardProp?: (string) => boolean,\n  target?: string,\n}\n\nexport type StyledComponent<Props> = StatelessFunctionalComponent<Props> & {\n  defaultProps: any,\n  toString: () => string,\n  withComponent: (\n    nextTag: ElementType,\n    nextOptions?: StyledOptions\n  ) => StyledComponent<Props>,\n}\n\nexport type PrivateStyledComponent<Props> = StyledComponent<Props> & {\n  __emotion_real: StyledComponent<Props>,\n  __emotion_base: any,\n  __emotion_styles: any,\n  __emotion_forwardProp: any,\n}\n\nconst testOmitPropsOnStringTag = isPropValid\nconst testOmitPropsOnComponent = (key: string) => key !== 'theme'\n\nexport const getDefaultShouldForwardProp = (tag: ElementType) =>\n  typeof tag === 'string' &&\n  // 96 is one less than the char code\n  // for \"a\" so this is checking that\n  // it's a lowercase character\n  tag.charCodeAt(0) > 96\n    ? testOmitPropsOnStringTag\n    : testOmitPropsOnComponent\n\nexport const composeShouldForwardProps = (\n  tag: PrivateStyledComponent<any>,\n  options: StyledOptions | void,\n  isReal: boolean\n) => {\n  let shouldForwardProp\n  if (options) {\n    const optionsShouldForwardProp = options.shouldForwardProp\n    shouldForwardProp =\n      tag.__emotion_forwardProp && optionsShouldForwardProp\n        ? (propName: string) =>\n            tag.__emotion_forwardProp(propName) &&\n            optionsShouldForwardProp(propName)\n        : optionsShouldForwardProp\n  }\n\n  if (typeof shouldForwardProp !== 'function' && isReal) {\n    shouldForwardProp = tag.__emotion_forwardProp\n  }\n\n  return shouldForwardProp\n}\n\nexport type CreateStyledComponent = <Props>(\n  ...args: Interpolations\n) => StyledComponent<Props>\n\nexport type CreateStyled = {\n  <Props>(\n    tag: ElementType,\n    options?: StyledOptions\n  ): (...args: Interpolations) => StyledComponent<Props>,\n  [key: string]: CreateStyledComponent,\n  bind: () => CreateStyled,\n}\n","// @flow\nimport * as React from 'react'\nimport type { ElementType } from 'react'\nimport {\n  getDefaultShouldForwardProp,\n  composeShouldForwardProps,\n  type StyledOptions,\n  type CreateStyled,\n  type PrivateStyledComponent,\n} from './utils'\nimport { withEmotionCache, ThemeContext } from '@emotion/react'\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils'\nimport { serializeStyles } from '@emotion/serialize'\n\nconst ILLEGAL_ESCAPE_SEQUENCE_ERROR = `You have illegal escape sequence in your template literal, most likely inside content's property value.\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \"content: '\\\\00d7';\" should become \"content: '\\\\\\\\00d7';\".\nYou can read more about this here:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences`\n\nlet isBrowser = typeof document !== 'undefined'\n\nlet createStyled: CreateStyled = (tag: any, options?: StyledOptions) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (tag === undefined) {\n      throw new Error(\n        'You are trying to create a styled element with an undefined component.\\nYou may have forgotten to import it.'\n      )\n    }\n  }\n  const isReal = tag.__emotion_real === tag\n  const baseTag = (isReal && tag.__emotion_base) || tag\n\n  let identifierName\n  let targetClassName\n  if (options !== undefined) {\n    identifierName = options.label\n    targetClassName = options.target\n  }\n\n  const shouldForwardProp = composeShouldForwardProps(tag, options, isReal)\n  const defaultShouldForwardProp =\n    shouldForwardProp || getDefaultShouldForwardProp(baseTag)\n  const shouldUseAs = !defaultShouldForwardProp('as')\n\n  return function <Props>(): PrivateStyledComponent<Props> {\n    let args = arguments\n    let styles =\n      isReal && tag.__emotion_styles !== undefined\n        ? tag.__emotion_styles.slice(0)\n        : []\n\n    if (identifierName !== undefined) {\n      styles.push(`label:${identifierName};`)\n    }\n    if (args[0] == null || args[0].raw === undefined) {\n      styles.push.apply(styles, args)\n    } else {\n      if (process.env.NODE_ENV !== 'production' && args[0][0] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR)\n      }\n      styles.push(args[0][0])\n      let len = args.length\n      let i = 1\n      for (; i < len; i++) {\n        if (process.env.NODE_ENV !== 'production' && args[0][i] === undefined) {\n          console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR)\n        }\n        styles.push(args[i], args[0][i])\n      }\n    }\n\n    // $FlowFixMe: we need to cast StatelessFunctionalComponent to our PrivateStyledComponent class\n    const Styled: PrivateStyledComponent<Props> = withEmotionCache(\n      (props, cache, ref) => {\n        const finalTag = (shouldUseAs && props.as) || baseTag\n\n        let className = ''\n        let classInterpolations = []\n        let mergedProps = props\n        if (props.theme == null) {\n          mergedProps = {}\n          for (let key in props) {\n            mergedProps[key] = props[key]\n          }\n          mergedProps.theme = React.useContext(ThemeContext)\n        }\n\n        if (typeof props.className === 'string') {\n          className = getRegisteredStyles(\n            cache.registered,\n            classInterpolations,\n            props.className\n          )\n        } else if (props.className != null) {\n          className = `${props.className} `\n        }\n\n        const serialized = serializeStyles(\n          styles.concat(classInterpolations),\n          cache.registered,\n          mergedProps\n        )\n        const rules = insertStyles(\n          cache,\n          serialized,\n          typeof finalTag === 'string'\n        )\n        className += `${cache.key}-${serialized.name}`\n        if (targetClassName !== undefined) {\n          className += ` ${targetClassName}`\n        }\n\n        const finalShouldForwardProp =\n          shouldUseAs && shouldForwardProp === undefined\n            ? getDefaultShouldForwardProp(finalTag)\n            : defaultShouldForwardProp\n\n        let newProps = {}\n\n        for (let key in props) {\n          if (shouldUseAs && key === 'as') continue\n\n          if (\n            // $FlowFixMe\n            finalShouldForwardProp(key)\n          ) {\n            newProps[key] = props[key]\n          }\n        }\n\n        newProps.className = className\n        newProps.ref = ref\n\n        const ele = React.createElement(finalTag, newProps)\n        if (!isBrowser && rules !== undefined) {\n          let serializedNames = serialized.name\n          let next = serialized.next\n          while (next !== undefined) {\n            serializedNames += ' ' + next.name\n            next = next.next\n          }\n          return (\n            <>\n              <style\n                {...{\n                  [`data-emotion`]: `${cache.key} ${serializedNames}`,\n                  dangerouslySetInnerHTML: { __html: rules },\n                  nonce: cache.sheet.nonce,\n                }}\n              />\n              {ele}\n            </>\n          )\n        }\n        return ele\n      }\n    )\n\n    Styled.displayName =\n      identifierName !== undefined\n        ? identifierName\n        : `Styled(${\n            typeof baseTag === 'string'\n              ? baseTag\n              : baseTag.displayName || baseTag.name || 'Component'\n          })`\n\n    Styled.defaultProps = tag.defaultProps\n    Styled.__emotion_real = Styled\n    Styled.__emotion_base = baseTag\n    Styled.__emotion_styles = styles\n    Styled.__emotion_forwardProp = shouldForwardProp\n\n    Object.defineProperty(Styled, 'toString', {\n      value() {\n        if (\n          targetClassName === undefined &&\n          process.env.NODE_ENV !== 'production'\n        ) {\n          return 'NO_COMPONENT_SELECTOR'\n        }\n        // $FlowFixMe: coerce undefined to string\n        return `.${targetClassName}`\n      },\n    })\n\n    Styled.withComponent = (\n      nextTag: ElementType,\n      nextOptions?: StyledOptions\n    ) => {\n      return createStyled(nextTag, {\n        ...options,\n        // $FlowFixMe\n        ...nextOptions,\n        shouldForwardProp: composeShouldForwardProps(Styled, nextOptions, true),\n      })(...styles)\n    }\n\n    return Styled\n  }\n}\n\nexport default createStyled\n","// @flow\nimport styled from './base'\nimport { tags } from './tags'\n\n// bind it to avoid mutating the original function\nconst newStyled = styled.bind()\n\ntags.forEach((tagName) => {\n  // $FlowFixMe: we can ignore this because its exposed type is defined by the CreateStyled type\n  newStyled[tagName] = newStyled(tagName)\n})\n\nexport default newStyled\n","// @flow\nexport const tags = [\n  'a',\n  'abbr',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'base',\n  'bdi',\n  'bdo',\n  'big',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'data',\n  'datalist',\n  'dd',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'div',\n  'dl',\n  'dt',\n  'em',\n  'embed',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'iframe',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'keygen',\n  'label',\n  'legend',\n  'li',\n  'link',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meta',\n  'meter',\n  'nav',\n  'noscript',\n  'object',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'param',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'script',\n  'section',\n  'select',\n  'small',\n  'source',\n  'span',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'title',\n  'tr',\n  'track',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n\n  // SVG\n  'circle',\n  'clipPath',\n  'defs',\n  'ellipse',\n  'foreignObject',\n  'g',\n  'image',\n  'line',\n  'linearGradient',\n  'mask',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialGradient',\n  'rect',\n  'stop',\n  'svg',\n  'text',\n  'tspan',\n]\n"],"names":["testOmitPropsOnStringTag","testOmitPropsOnComponent","key","getDefaultShouldForwardProp","tag","charCodeAt","composeShouldForwardProps","options","isReal","shouldForwardProp","optionsShouldForwardProp","__emotion_forwardProp","propName","ILLEGAL_ESCAPE_SEQUENCE_ERROR","isBrowser","document","newStyled","createStyled","process","env","NODE_ENV","undefined","Error","identifierName","targetClassName","__emotion_real","baseTag","__emotion_base","label","target","defaultShouldForwardProp","shouldUseAs","args","arguments","styles","__emotion_styles","slice","push","raw","apply","console","error","len","length","i","Styled","withEmotionCache","props","cache","ref","finalTag","as","className","classInterpolations","mergedProps","theme","React","ThemeContext","getRegisteredStyles","registered","serialized","serializeStyles","concat","rules","insertStyles","name","finalShouldForwardProp","newProps","ele","serializedNames","next","h","dangerouslySetInnerHTML","__html","nonce","sheet","displayName","defaultProps","Object","defineProperty","value","withComponent","nextTag","nextOptions","bind","forEach","tagName"],"mappings":"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eAAzBN,QAAQC,IAAIC,SAEL,4BAGEI,KAIfqB,EAAOoC,cAAgB,SACrBC,EACAC,GAEA,OAAOlE,EAAaiE,OACf3E,EAEA4E,GACH1E,kBAAmBH,EAA0BuC,EAAQsC,GAAa,mBAC9DjD,IAGDW,ICjMcuC,OCJL,CAClB,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,OACA,OACA,MACA,WACA,OACA,WACA,KACA,MACA,UACA,MACA,SACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,OACA,MACA,OACA,UACA,OACA,WACA,OACA,QACA,MACA,WACA,SACA,KACA,WACA,SACA,SACA,IACA,QACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,QACA,SACA,OACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,QACA,KACA,QACA,IACA,KACA,MACA,QACA,MAGA,SACA,WACA,OACA,UACA,gBACA,IACA,QACA,OACA,iBACA,OACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,MACA,OACA,SDlIGC,QAAQ,SAACC,GAEZtE,EAAUsE,GAAWtE,EAAUsE"}